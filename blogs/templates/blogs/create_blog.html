{% extends 'authentication/base.html' %}
{% block title %}Create Blog - PyCMS{% endblock %}
{% block content %}
<section class="section">
    <div class="container">
        <h1 class="title has-text-centered">Create a new post</h1>
        <form method="post">
            {% csrf_token %}
            <div class="field">
                <label class="label">Title</label>
                <div class="control">
                    {{form.title}}{{form.title.errors}}
                </div>
            </div>
            <div class="field">
                <label class="label">Content</label>
                <div class="control">
                    {{form.content}}{{form.content.errors}}
                </div>
            </div>
            <div class="field">
                <div class="control">
                    <button class="button is-primary" type="submit">Publish</button>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <div class="markdown-preview" id="markdown-preview"></div>
    </div>
</section>
<script>
    const markdownInput = document.getElementById('markdown-input');
    const markdownPreview = document.getElementById('markdown-preview');

    function updateMarkdown() {
        markdownPreview.innerHTML = marked.parse(markdownInput.value);
    }

    markdownInput.addEventListener('input', updateMarkdown);
    updateMarkdown();
</script>
{% endblock %}